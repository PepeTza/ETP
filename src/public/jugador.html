<!DOCTYPE html>

<script>

    ws = new WebSocket("ws://localhost:1234");

    let user;
    let botones = [];
    let botonesUsados = [];
    
    ws.addEventListener('open', (data) => {

        botones = [botonQ, botonW, botonE, botonR, botonT, botonY, botonU, botonI,
                botonO, botonP, botonA, botonS, botonD, botonF, botonG, botonH, botonJ, 
                botonK, botonL, botonÑ, botonZ, botonX, botonC, botonV, botonB, botonN, 
                botonM];

        submit.onclick = () => {

            if (username.value.indexOf(" ")==-1){

                user = username.value;
                ws.send(user);
                submit.disabled = true;
                username.disabled = true; 
                for (i=0; i<botones.length; i++) botones[i].disabled = false;
            }
            else{

                window.alert('El nombre de usuario no puede contener espacios');
            }
        }

        botonQ.onclick = () => {

            ws.send(botonQ.value + ` ${user}`);
            botonesUsados.push(botonQ);
        }
        botonW.onclick = () => {

            ws.send(botonW.value + ` ${user}`);
            botonesUsados.push(botonW);
        }
        botonE.onclick = () => {

            ws.send(botonE.value + ` ${user}`);
            botonesUsados.push(botonE);
        }
        botonR.onclick = () => {

            ws.send(botonR.value + ` ${user}`);
            botonesUsados.push(botonR);
        }
        botonT.onclick = () => {

            ws.send(botonT.value + ` ${user}`);
            botonesUsados.push(botonT);
        }
        botonY.onclick = () => {

            ws.send(botonY.value + ` ${user}`);
            botonesUsados.push(botonY);
        }
        botonU.onclick = () => {

            ws.send(botonU.value + ` ${user}`);
            botonesUsados.push(botonU);
        }
        botonI.onclick = () => {

            ws.send(botonI.value + ` ${user}`);
            botonesUsados.push(botonI);
        }
        botonO.onclick = () => {

            ws.send(botonO.value + ` ${user}`);
            botonesUsados.push(botonO);
        }
        botonP.onclick = () => {

            ws.send(botonP.value + ` ${user}`);
            botonesUsados.push(botonP);
        }
        botonA.onclick = () => {

            ws.send(botonA.value + ` ${user}`);
            botonesUsados.push(botonA);
        }
        botonS.onclick = () => {

            ws.send(botonS.value + ` ${user}`);
            botonesUsados.push(botonS);
        }
        botonD.onclick = () => {

            ws.send(botonD.value + ` ${user}`);
            botonesUsados.push(botonD);
        }
        botonF.onclick = () => {

            ws.send(botonF.value + ` ${user}`);
            botonesUsados.push(botonF);
        }
        botonG.onclick = () => {

            ws.send(botonG.value + ` ${user}`);
            botonesUsados.push(botonG);
        }
        botonH.onclick = () => {

            ws.send(botonH.value + ` ${user}`);
            botonesUsados.push(botonH);
        }
        botonJ.onclick = () => {

            ws.send(botonJ.value + ` ${user}`);
            botonesUsados.push(botonJ);
        }
        botonK.onclick = () => {

            ws.send(botonK.value + ` ${user}`);
            botonesUsados.push(botonK);
        }
        botonL.onclick = () => {

            ws.send(botonL.value + ` ${user}`);
            botonesUsados.push(botonL);
        }
        botonÑ.onclick = () => {

            ws.send(botonÑ.value + ` ${user}`);
            botonesUsados.push(botonÑ);
        }
        botonZ.onclick = () => {

            ws.send(botonZ.value + ` ${user}`);
            botonesUsados.push(botonZ);
        }
        botonX.onclick = () => {

            ws.send(botonX.value + ` ${user}`);
            botonesUsados.push(botonX);
        }
        botonC.onclick = () => {

            ws.send(botonC.value + ` ${user}`);
            botonesUsados.push(botonC);
        }
        botonV.onclick = () => {

            ws.send(botonV.value + ` ${user}`);
            botonesUsados.push(botonV);
        }
        botonB.onclick = () => {

            ws.send(botonB.value + ` ${user}`);
            botonesUsados.push(botonB);
        }
        botonN.onclick = () => {

            ws.send(botonN.value + ` ${user}`);
            botonesUsados.push(botonN);
        }
        botonM.onclick = () => {

            ws.send(botonM.value + ` ${user}`);
            botonesUsados.push(botonM);
        }

        ws.addEventListener('message', (data) => {

            if(data.data=='1'){

                window.alert(`El nombre de usuario ${user} ya esta en uso`);
                username.disabled = false;
                submit.disabled = false;
                for (i=0; i<botones.length; i++) botones[i].disabled = true;
            }
            else if(data.data[data.data.length-1]=="s"){

                console.log("Es correcto");
            }
            else if(data.data[data.data.length-1]=="n"){

                console.log("Es incorrecto");
            }
        })
    })

</script>

<html>
    <head>
        <title>El ahorcado</title>
    </head>
    <body class="container">
        <div class="row mt-4">
            <div class="col-sm-6">
                <div>Aqui va el nombre de usuario</div><br>
                <textarea id="username" cols="15" rows="1"></textarea>
                <button id = "submit">Submit</button>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-sm-6">
                <div>Aqui va el dibujo</div>
                <textarea id="pantalla" cols="10" rows="15"></textarea>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-sm-6">
                <div>Aqui van las letras</div>
                <button id = "botonQ" value = "q" disabled = true >q</button>
                <button id = "botonW" value = "w" disabled = true >w</button>
                <button id = "botonE" value = "e" disabled = true >e</button>
                <button id = "botonR" value = "r" disabled = true >r</button>
                <button id = "botonT" value = "t" disabled = true >t</button>
                <button id = "botonY" value = "y" disabled = true >y</button>
                <button id = "botonU" value = "u" disabled = true >u</button>
                <button id = "botonI" value = "i" disabled = true >i</button>
                <button id = "botonO" value = "o" disabled = true >o</button>
                <button id = "botonP" value = "p" disabled = true >p</button><br>
                <button id = "botonA" value = "a" disabled = true >a</button>
                <button id = "botonS" value = "s" disabled = true >s</button>
                <button id = "botonD" value = "d" disabled = true >d</button>
                <button id = "botonF" value = "f" disabled = true >f</button>
                <button id = "botonG" value = "g" disabled = true >g</button>
                <button id = "botonH" value = "h" disabled = true >h</button>
                <button id = "botonJ" value = "j" disabled = true >j</button>
                <button id = "botonK" value = "k" disabled = true >k</button>
                <button id = "botonL" value = "l" disabled = true >l</button>
                <button id = "botonÑ" value = "ñ" disabled = true >ñ</button><br>
                <button id = "botonZ" value = "z" disabled = true >z</button>
                <button id = "botonX" value = "x" disabled = true >x</button>
                <button id = "botonC" value = "c" disabled = true >c</button>
                <button id = "botonV" value = "v" disabled = true >v</button>
                <button id = "botonB" value = "b" disabled = true >b</button>
                <button id = "botonN" value = "n" disabled = true >n</button>
                <button id = "botonM" value = "m" disabled = true >m</button>
            </div>
        </div>
    </body>
</html>

<style>

    button [id = botonQ],[id = botonW],[id = botonE],[id = botonR],[id = botonT],[id = botonY],[id = botonU],[id = botonI],[id = botonO],[id = botonP],
    [id = botonA],[id = botonS],[id = botonD],[id = botonF],[id = botonG],[id = botonH],[id = botonJ],[id = botonK],[id = botonL],[id = botonÑ],
    [id = botonZ],[id = botonX],[id = botonC],[id = botonV],[id = botonB],[id = botonN],[id = botonM],[id = botonQ] {

        width: 30px;
        height: 30px;
    }

    button [id = submit] {

        width: 50px;
        height: 65px;
    }

</style>